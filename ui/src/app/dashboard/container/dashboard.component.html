<div class="container-fluid p-3" role="main">
    <section class="section">
        <div class="section-header bg-primary p-2 text-light">
            <div class="row justify-content-between">
                <div class="col-md-4">
                    <span class="lead" i18n="@@label--current-metadata-sources">Current Metadata Sources</span>
                </div>
                <div class="col-md-4 text-right">
                    <div ngbDropdown class="d-inline-block">
                        <button class="btn btn-light" id="filterDropdown" ngbDropdownToggle>
                            <i class="fa" [ngClass]="{
                                'fa-cube': filtering === 'provider',
                                'fa-cubes': filtering === 'filter',
                                'fa-dot-circle-o': filtering === 'all'
                            }"></i>
                            <ng-container i18n="@@label--selected-filter-option">
                                {filtering, select, filter {Show Filters} provider {Show Sources} other {Show All}}
                            </ng-container>
                        </button>
                        <div ngbDropdownMenu aria-labelledby="filterDropdown">
                            <button class="dropdown-item"
                                *ngFor="let option of filterOptions; index as i"
                                (click)="changeFilter(option)">
                                <i class="fa" [ngClass]="{
                                    'fa-cube': option === 'provider',
                                    'fa-cubes': option === 'filter',
                                    'fa-dot-circle-o': option === 'all'
                                }"></i>
                                <ng-container i18n="@@label--select-filter-option">
                                    {option, select, filter {Show Filters} provider {Show Source} other {Show All}}
                                </ng-container>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <provider-search
                        [query]="searchQuery$ | async"
                        [searching]="loading$ | async"
                        (search)="search($event)">
                    </provider-search>
                </div>
            </div>
        </div>
        <div class="section-body p-2 border border-top-0 border-primary">
            <ul class="list-unstyled m-0">
                <li *ngFor="let entity of limited$ | async; index as i" [ngClass]="{'mt-2': i > 0}" aria-label="Provider Item Accordion. Press Spacebar to open">
                    <entity-item
                        [entity]="entity"
                        [isOpen]="(entitiesOpen$ | async)[entity.id || entity.entityId]"
                        (select)="edit(entity)"
                        (toggle)="toggleProvider(entity)"
                        (preview)="openPreviewDialog(entity)"
                        (delete)="deleteProvider(entity)">
                    </entity-item>
                </li>
            </ul>
            <div class="mt-3 clearfix" *ngIf="(total$ | async) > limit">
                <ngb-pagination
                    class="float-right"
                    [collectionSize]="total$ | async"
                    [page]="page"
                    [pageSize]="limit"
                    (pageChange)="changePage($event)"
                    aria-label="Pages">
                </ngb-pagination>
            </div>
        </div>
    </section>
</div>
